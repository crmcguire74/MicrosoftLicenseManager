<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Microsoft License Feature Selector</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Segoe+UI:wght@300;400;500;600;700&display=swap');
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            /* Dark Blue/Purple Color Palette */
            --primary: #4c6ef5;
            --primary-light: #748ffc;
            --primary-dark: #364fc7;
            --accent: #7c3aed;
            --accent-light: #a78bfa;
            --secondary: #3b82f6;
            --success: #10b981;
            --warning: #f59e0b;
            --error: #ef4444;
            --info: #06b6d4;
            
            /* Dark Background Colors */
            --bg-primary: #0f172a;
            --bg-secondary: #1e293b;
            --bg-tertiary: #334155;
            --bg-card: #1e293b;
            --bg-card-hover: #334155;
            
            /* Text Colors */
            --text-primary: #f1f5f9;
            --text-secondary: #cbd5e1;
            --text-tertiary: #94a3b8;
            --text-muted: #64748b;
            
            /* Border Colors */
            --border-primary: #475569;
            --border-secondary: #334155;
            --border-accent: #4c6ef5;
            
            /* Shadows */
            --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.3);
            --shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.4), 0 1px 2px 0 rgba(0, 0, 0, 0.3);
            --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.4), 0 2px 4px -1px rgba(0, 0, 0, 0.3);
            --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.4), 0 4px 6px -2px rgba(0, 0, 0, 0.3);
            --shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.4), 0 10px 10px -5px rgba(0, 0, 0, 0.2);
            
            /* Spacing */
            --spacing-xs: 4px;
            --spacing-s: 8px;
            --spacing-m: 12px;
            --spacing-l: 16px;
            --spacing-xl: 20px;
            --spacing-xxl: 24px;
            --spacing-xxxl: 32px;
            
            /* Border Radius */
            --radius-sm: 4px;
            --radius: 6px;
            --radius-md: 8px;
            --radius-lg: 12px;
            --radius-xl: 16px;
            --radius-2xl: 20px;
        }

        body {
            font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
            background: linear-gradient(135deg, #0f172a 0%, #1e293b 25%, #312e81 50%, #4338ca 75%, #1e293b 100%);
            background-size: 400% 400%;
            animation: gradientShift 20s ease infinite;
            color: var(--text-primary);
            line-height: 1.5;
            font-size: 14px;
            min-height: 100vh;
            overflow-x: hidden;
        }

        @keyframes gradientShift {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(circle at 20% 80%, rgba(76, 110, 245, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(124, 58, 237, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 40% 40%, rgba(59, 130, 246, 0.1) 0%, transparent 50%);
            pointer-events: none;
            z-index: 0;
        }

        .app-container {
            width: 100%;
            max-width: 100vw;
            margin: 0 auto;
            padding: var(--spacing-l);
            position: relative;
            z-index: 1;
            overflow-x: hidden;
        }

        /* Header */
        .header {
            text-align: center;
            margin-bottom: var(--spacing-xxxl);
            padding: var(--spacing-xxxl) 0;
        }

        .header h1 {
            font-size: clamp(2rem, 5vw, 3rem);
            font-weight: 700;
            background: linear-gradient(135deg, #f1f5f9 0%, #a78bfa 50%, #4c6ef5 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: var(--spacing-l);
            text-shadow: 0 0 30px rgba(255, 255, 255, 0.5);
        }

        .header .subtitle {
            font-size: clamp(1rem, 3vw, 1.25rem);
            color: var(--text-secondary);
            font-weight: 400;
            max-width: 600px;
            margin: 0 auto;
        }

        /* Main Layout - Screenshot Style */
        .top-section {
            display: grid;
            grid-template-columns: 1fr 320px;
            gap: var(--spacing-xxl);
            margin-bottom: var(--spacing-xxxl);
        }

        .matrix-section {
            width: 100%;
        }

        /* Feature Selector */
        .feature-selector {
            background: rgba(30, 41, 59, 0.9);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(116, 143, 252, 0.3);
            border-radius: var(--radius-xl);
            padding: var(--spacing-xxxl);
            box-shadow: var(--shadow-xl);
        }

        .section-header {
            display: flex;
            align-items: center;
            gap: var(--spacing-m);
            margin-bottom: var(--spacing-xl);
        }

        .section-header h2 {
            font-size: 1.75rem;
            font-weight: 600;
            color: var(--text-primary);
        }

        .section-icon {
            width: 24px;
            height: 24px;
            background: linear-gradient(135deg, var(--primary) 0%, var(--accent) 100%);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 12px;
        }

        .features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
            gap: var(--spacing-l);
            margin-bottom: var(--spacing-xl);
        }

        .feature-item {
            background: rgba(51, 65, 85, 0.6);
            border: 2px solid transparent;
            border-radius: var(--radius-lg);
            padding: var(--spacing-xl);
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }

        .feature-item::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, var(--primary) 0%, var(--accent) 100%);
            opacity: 0;
            transition: opacity 0.3s ease;
            z-index: 0;
        }

        .feature-item:hover {
            border-color: var(--primary);
            box-shadow: var(--shadow-lg);
            transform: translateY(-2px);
        }

        .feature-item.selected {
            border-color: var(--primary);
            color: white;
            transform: translateY(-1px);
        }

        .feature-item.selected::before {
            opacity: 1;
        }

        .feature-content {
            display: flex;
            align-items: center;
            gap: var(--spacing-l);
            position: relative;
            z-index: 1;
        }

        .feature-icon {
            width: 32px;
            height: 32px;
            border-radius: var(--radius);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 16px;
            color: white;
            background: linear-gradient(135deg, var(--primary) 0%, var(--accent) 100%);
            transition: all 0.3s ease;
            flex-shrink: 0;
        }

        .feature-item.selected .feature-icon {
            background: rgba(255, 255, 255, 0.2);
        }

        .feature-checkbox {
            width: 18px;
            height: 18px;
            accent-color: var(--primary);
            cursor: pointer;
            flex-shrink: 0;
        }

        .feature-label {
            font-weight: 500;
            cursor: pointer;
            flex: 1;
            font-size: 0.95rem;
        }

        /* Compatibility Matrix - Fixed Left Design */
        .compatibility-section {
            background: rgba(30, 41, 59, 0.9);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(116, 143, 252, 0.3);
            border-radius: var(--radius-xl);
            box-shadow: var(--shadow-xl);
            overflow: hidden;
        }

        .compatibility-header {
            background: rgba(51, 65, 85, 0.8);
            padding: var(--spacing-xl) var(--spacing-xxxl);
            border-bottom: 1px solid var(--border-secondary);
        }

        .compatibility-header h2 {
            font-size: 1.75rem;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: var(--spacing-s);
        }

        .compatibility-description {
            color: var(--text-secondary);
            font-size: 0.875rem;
        }

        .matrix-wrapper {
            position: relative;
            width: 100%;
            overflow: hidden;
        }

        .matrix-container {
            display: flex;
            width: 100%;
            max-height: 500px;
            overflow: auto;
        }

        .matrix-licenses {
            width: 300px;
            min-width: 300px;
            background: rgba(30, 41, 59, 0.95);
            border-right: 2px solid var(--border-primary);
            overflow-y: auto;
            max-height: 500px;
        }

        .matrix-features {
            flex: 1;
            overflow-x: auto;
            overflow-y: auto;
            max-height: 500px;
        }

        .license-header-cell {
            padding: var(--spacing-l);
            background: rgba(51, 65, 85, 0.9);
            position: sticky;
            top: 0;
            z-index: 10;
            font-weight: 600;
            font-size: 0.9rem;
            color: var(--text-secondary);
            text-transform: uppercase;
            letter-spacing: 0.5px;
            text-align: center;
            border-bottom: 2px solid var(--border-primary);
        }

        .license-name-cell {
            padding: var(--spacing-l);
            background: rgba(30, 41, 59, 0.95);
            border-bottom: 1px solid var(--border-secondary);
            transition: background 0.2s ease;
        }

        .license-name-cell:hover {
            background: rgba(51, 65, 85, 0.8);
        }

        .license-info {
            display: flex;
            flex-direction: column;
            gap: var(--spacing-xs);
        }

        .license-name {
            font-weight: 600;
            color: var(--text-primary);
            font-size: 0.9rem;
            line-height: 1.3;
        }

        .license-price {
            font-weight: 500;
            color: var(--primary-light);
            font-size: 0.8rem;
        }

        .license-category {
            display: inline-block;
            padding: 2px 6px;
            border-radius: var(--radius-sm);
            font-size: 0.7rem;
            font-weight: 500;
            text-transform: uppercase;
            letter-spacing: 0.3px;
            width: fit-content;
        }

        .category-development {
            background: rgba(124, 58, 237, 0.3);
            color: var(--accent-light);
        }

        .category-productivity {
            background: rgba(76, 110, 245, 0.3);
            color: var(--primary-light);
        }

        .category-enterprise {
            background: rgba(148, 163, 184, 0.3);
            color: var(--text-secondary);
        }

        .category-ai {
            background: rgba(245, 158, 11, 0.3);
            color: #fbbf24;
        }

        .matrix-grid {
            display: table;
            width: max-content;
            min-width: 100%;
        }

        .matrix-header-row {
            display: table-row;
            background: rgba(51, 65, 85, 0.9);
            position: sticky;
            top: 0;
            z-index: 5;
        }

        .matrix-header-cell {
            display: table-cell;
            padding: var(--spacing-l) var(--spacing-m);
            font-weight: 600;
            font-size: 0.75rem;
            color: var(--text-secondary);
            text-align: center;
            border-bottom: 2px solid var(--border-primary);
            border-right: 1px solid var(--border-secondary);
            background: rgba(51, 65, 85, 0.9);
            white-space: nowrap;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            writing-mode: vertical-rl;
            text-orientation: mixed;
            width: 100px;
           /* min-width: 70px; */
        }

        .matrix-body {
            display: table-row-group;
        }

        .matrix-row {
            display: table-row;
            transition: background 0.2s ease;
        }

        .matrix-row:hover {
            background: rgba(76, 110, 245, 0.1);
        }

        .matrix-cell {
            display: table-cell;
            padding: var(--spacing-l) var(--spacing-m);
            border-bottom: 1px solid var(--border-secondary);
            border-right: 1px solid var(--border-secondary);
            text-align: center;
            width: 70px;
            min-width: 70px;
            background: rgba(30, 41, 59, 0.8);
        }

        .support-indicator {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 32px;
            height: 32px;
            border-radius: 50%;
            font-weight: 700;
            font-size: 0.75rem;
            transition: all 0.2s ease;
            cursor: help;
            margin: 0 auto;
        }

        .support-full {
            background: linear-gradient(135deg, var(--success) 0%, #34d399 100%);
            color: white;
            box-shadow: 0 2px 4px rgba(16, 185, 129, 0.3);
        }

        .support-partial {
            background: linear-gradient(135deg, var(--warning) 0%, #fbbf24 100%);
            color: white;
            box-shadow: 0 2px 4px rgba(245, 158, 11, 0.3);
        }

        .support-addon {
            background: linear-gradient(135deg, var(--info) 0%, #22d3ee 100%);
            color: white;
            box-shadow: 0 2px 4px rgba(6, 182, 212, 0.3);
        }

        .support-none {
            background: linear-gradient(135deg, var(--error) 0%, #f87171 100%);
            color: white;
            box-shadow: 0 2px 4px rgba(239, 68, 68, 0.3);
        }

        .support-indicator:hover {
            transform: scale(1.1);
        }

        /* Recommendations Panel - Fixed in Top Section */
        .recommendations-panel {
            background: rgba(30, 41, 59, 0.9);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(116, 143, 252, 0.3);
            border-radius: var(--radius-xl);
            box-shadow: var(--shadow-xl);
            height: fit-content;
            width: 100%;
            min-width: 0;
        }

        .recommendations-header {
            padding: var(--spacing-xl) var(--spacing-xxxl);
            background: rgba(51, 65, 85, 0.8);
            border-bottom: 1px solid var(--border-secondary);
        }

        .recommendations-header h2 {
            font-size: 1.5rem;
            font-weight: 600;
            color: var(--text-primary);
        }

        .recommendations-content {
            padding: var(--spacing-xl);
        }

        .recommendation-card {
            background: rgba(51, 65, 85, 0.6);
            border: 1px solid var(--border-secondary);
            border-radius: var(--radius-lg);
            padding: var(--spacing-xl);
            margin-bottom: var(--spacing-l);
            transition: all 0.3s ease;
            cursor: pointer;
            position: relative;
            overflow: hidden;
        }

        .recommendation-card::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            bottom: 0;
            width: 4px;
            background: linear-gradient(135deg, var(--primary) 0%, var(--accent) 100%);
            border-radius: var(--radius-sm) 0 0 var(--radius-sm);
        }

        .recommendation-card:hover {
            background: var(--bg-card-hover);
            transform: translateY(-1px);
            box-shadow: var(--shadow-lg);
            border-color: var(--primary);
        }

        .recommendation-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: var(--spacing-m);
            gap: var(--spacing-s);
        }

        .recommendation-title {
            font-weight: 600;
            color: var(--text-primary);
            font-size: 0.95rem;
            flex: 1;
        }

        .match-score {
            background: linear-gradient(135deg, var(--success) 0%, var(--info) 100%);
            color: white;
            padding: 4px 8px;
            border-radius: var(--radius-2xl);
            font-size: 0.7rem;
            font-weight: 600;
            white-space: nowrap;
        }

        .recommendation-price {
            font-size: 1.1rem;
            font-weight: 700;
            background: linear-gradient(135deg, var(--primary) 0%, var(--accent) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: var(--spacing-s);
        }

        .recommendation-details {
            color: var(--text-secondary);
            font-size: 0.85rem;
            line-height: 1.5;
        }

        /* Controls */
        .controls {
            display: flex;
            gap: var(--spacing-m);
            margin-top: var(--spacing-l);
            flex-wrap: wrap;
        }

        .btn {
            padding: var(--spacing-m) var(--spacing-xl);
            border: 1px solid var(--border-primary);
            border-radius: var(--radius-lg);
            background: rgba(51, 65, 85, 0.8);
            color: var(--text-primary);
            font-weight: 600;
            font-size: 0.875rem;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: var(--spacing-s);
            box-shadow: var(--shadow-sm);
        }

        .btn:hover {
            border-color: var(--primary);
            background: rgba(76, 110, 245, 0.2);
            transform: translateY(-1px);
            box-shadow: var(--shadow-md);
        }

        /* Legend */
        .legend {
            display: flex;
            flex-wrap: wrap;
            gap: var(--spacing-xl);
            padding: var(--spacing-xl) var(--spacing-xxxl);
            background: rgba(51, 65, 85, 0.8);
            border-top: 1px solid var(--border-secondary);
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: var(--spacing-s);
            font-size: 0.8rem;
            color: var(--text-secondary);
            font-weight: 500;
        }

        .legend-icon {
            width: 16px;
            height: 16px;
            border-radius: 50%;
        }

        /* Empty States */
        .empty-state {
            text-align: center;
            padding: var(--spacing-xxxl);
            color: var(--text-secondary);
        }

        .empty-state-icon {
            font-size: 3rem;
            margin-bottom: var(--spacing-l);
            opacity: 0.6;
        }

        .empty-state h3 {
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: var(--spacing-s);
            font-size: 1.1rem;
        }

        /* Feature Counter */
        .feature-counter {
            position: fixed;
            bottom: var(--spacing-xl);
            right: var(--spacing-xl);
            background: linear-gradient(135deg, var(--primary) 0%, var(--accent) 100%);
            color: white;
            padding: var(--spacing-l) var(--spacing-xl);
            border-radius: var(--radius-2xl);
            font-weight: 600;
            font-size: 0.875rem;
            box-shadow: var(--shadow-xl);
            z-index: 1000;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
        }

        .feature-counter:hover {
            transform: scale(1.05);
        }

        /* Responsive Design */
        @media (max-width: 1400px) {
            .top-section {
                grid-template-columns: 1fr 300px;
            }
            
            .features-grid {
                grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            }
        }

        @media (max-width: 1200px) {
            .top-section {
                grid-template-columns: 1fr;
                gap: var(--spacing-xxl);
            }
            
            .features-grid {
                grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            }
        }

        @media (max-width: 768px) {
            .app-container {
                padding: var(--spacing-m);
            }
            
            .header h1 {
                font-size: 2rem;
            }
            
            .features-grid {
                grid-template-columns: 1fr;
            }
            
            .matrix-container {
                height: 500px;
            }
            
            .matrix-header-license {
		width: 320px;
                
            }
            
            .matrix-license-cell {
                width: 250px;
                min-width: 250px;
                height: 60px;
                padding: var(--spacing-l);
            }
            
            .matrix-header-cell {
                width: 70px;
                min-width: 70px;
                font-size: 0.7rem;
                height: 60px;
                padding: var(--spacing-m);
            }
            
            .matrix-cell {
                width: 70px;
                min-width: 70px;
                height: 60px;
                padding: var(--spacing-m);
            }
            
            .feature-counter {
                bottom: var(--spacing-l);
                right: var(--spacing-l);
                padding: var(--spacing-m) var(--spacing-l);
            }
            
            .section-header h2 {
                font-size: 1.5rem;
            }
            
            .recommendations-header h2 {
                font-size: 1.25rem;
            }
            
            .compatibility-header h2 {
                font-size: 1.5rem;
            }
            
            .feature-selector,
            .compatibility-section,
            .recommendations-panel {
                padding: var(--spacing-l);
            }
            
            .compatibility-header,
            .recommendations-header {
                padding: var(--spacing-m) var(--spacing-l);
            }
            
            .recommendations-content {
                padding: var(--spacing-m);
            }
        }

        @media (max-width: 480px) {
            .matrix-header-license {
                width: 320px;
                /*min-width: 200px;*/
                height: 50px;
                padding: var(--spacing-m);
            }
            
            .matrix-license-cell {
                width: 200px;
                min-width: 200px;
                height: 50px;
                padding: var(--spacing-m);
            }
            
            .matrix-header-cell {
                width: 60px;
                min-width: 60px;
                font-size: 0.65rem;
                height: 50px;
                padding: var(--spacing-s);
            }
            
            .matrix-cell {
                width: 60px;
                min-width: 60px;
                height: 50px;
                padding: var(--spacing-s);
            }
        }

        /* Smooth animations */
        @keyframes slideInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .recommendation-card {
            animation: slideInUp 0.4s ease forwards;
        }

        /* Custom scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }

        ::-webkit-scrollbar-track {
            background: rgba(51, 65, 85, 0.3);
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb {
            background: linear-gradient(135deg, var(--primary) 0%, var(--accent) 100%);
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(135deg, var(--primary-dark) 0%, var(--primary) 100%);
        }
    </style>
</head>
<body>
    <div class="app-container">
        <header class="header">
            <h1>🚀 Microsoft License Selector</h1>
            <p class="subtitle">Discover the perfect Microsoft licenses for your organization with AI-powered recommendations</p>
        </header>

        <div class="top-section">
            <!-- Feature Selector -->
            <section class="feature-selector">
                <div class="section-header">
                    <div class="section-icon">🎯</div>
                    <h2>Select Required Features</h2>
                </div>
                <div class="features-grid" id="featuresGrid"></div>
                <div class="controls">
                    <button class="btn" onclick="clearAllSelections()">
                        <svg width="16" height="16" viewBox="0 0 20 20" fill="currentColor">
                            <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
                        </svg>
                        Clear All
                    </button>
                </div>
            </section>

            <!-- Recommendations Panel -->
            <aside class="recommendations-panel">
                <div class="recommendations-header">
                    <h2>💡 Smart Recommendations</h2>
                </div>
                <div class="recommendations-content" id="recommendationsContent">
                    <div class="empty-state">
                        <div class="empty-state-icon">🎯</div>
                        <h3>Get Started</h3>
                        <p>Select the features you need to see personalized license recommendations.</p>
                    </div>
                </div>
            </aside>
        </div>

        <!-- Compatibility Matrix - Full Width -->
        <section class="matrix-section">
            <div class="compatibility-section">
                <div class="compatibility-header">
                    <h2>📋 License Compatibility Matrix</h2>
                    <p class="compatibility-description">Compare how different Microsoft licenses support your features (scroll horizontally for all features)</p>
                </div>
                
                <div class="matrix-wrapper">
                    <div class="matrix-container">
                        <div class="matrix-table" id="matrixTable" style="width:100%;">
                            <div class="matrix-header-row" id="headerRow">
                                <div class="matrix-header-license" style="text-align: center;display: table-cell; padding: var(--spacing-l) var(--spacing-m);width: 320px;">License</div>
                            </div>
                            <div class="matrix-body" id="matrixBody"></div>
                        </div>
                    </div>
                </div>
                
                <div class="legend">
                    <div class="legend-item">
                        <div class="legend-icon support-full"></div>
                        <span>Fully Included</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-icon support-partial"></div>
                        <span>Partially Included</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-icon support-addon"></div>
                        <span>Available as Add-on</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-icon support-none"></div>
                        <span>Not Available</span>
                    </div>
                </div>
            </div>
        </section>

        <!-- Feature Counter -->
        <div class="feature-counter" id="featureCounter" style="display: none;">
            <span id="counterText">0 features selected</span>
        </div>
    </div>

    <script>
        const features = [
            { name: 'Visual Studio IDE', icon: '💻', category: 'dev' },
            { name: 'Office Desktop Apps', icon: '📊', category: 'office' },
            { name: 'Office Web Apps', icon: '🌐', category: 'office' },
            { name: 'Microsoft Teams', icon: '👥', category: 'office' },
            { name: 'Azure DevOps', icon: '🔧', category: 'dev' },
            { name: 'GitHub Enterprise', icon: '🐙', category: 'dev' },
            { name: 'Code AI (GitHub Copilot)', icon: '🤖', category: 'ai' },
            { name: 'Office AI (M365 Copilot)', icon: '✨', category: 'ai' },
            { name: 'Azure Credits', icon: '☁️', category: 'cloud' },
            { name: 'Microsoft Software Access', icon: '📦', category: 'dev' },
            { name: 'Enterprise Security', icon: '🔒', category: 'office' },
            { name: 'Advanced Testing', icon: '🧪', category: 'dev' },
            { name: 'Custom AI Agents', icon: '🎭', category: 'ai' },
            { name: 'Premium Support', icon: '🎧', category: 'office' }
        ];

        const licenses = [
            {
                name: 'Visual Studio Community',
                price: 'FREE',
                category: 'development',
                features: {
                    'Visual Studio IDE': 'full',
                    'Office Desktop Apps': 'none',
                    'Office Web Apps': 'none',
                    'Microsoft Teams': 'none',
                    'Azure DevOps': 'partial',
                    'GitHub Enterprise': 'none',
                    'Code AI (GitHub Copilot)': 'none',
                    'Office AI (M365 Copilot)': 'none',
                    'Azure Credits': 'none',
                    'Microsoft Software Access': 'none',
                    'Enterprise Security': 'none',
                    'Advanced Testing': 'partial',
                    'Custom AI Agents': 'none',
                    'Premium Support': 'none'
                }
            },
            {
                name: 'Visual Studio Professional',
                price: '$45/month',
                category: 'development',
                features: {
                    'Visual Studio IDE': 'full',
                    'Office Desktop Apps': 'full',
                    'Office Web Apps': 'full',
                    'Microsoft Teams': 'full',
                    'Azure DevOps': 'full',
                    'GitHub Enterprise': 'none',
                    'Code AI (GitHub Copilot)': 'addon',
                    'Office AI (M365 Copilot)': 'addon',
                    'Azure Credits': 'partial',
                    'Microsoft Software Access': 'partial',
                    'Enterprise Security': 'partial',
                    'Advanced Testing': 'partial',
                    'Custom AI Agents': 'addon',
                    'Premium Support': 'partial'
                }
            },
            {
                name: 'Visual Studio Enterprise',
                price: '$250/month',
                category: 'development',
                features: {
                    'Visual Studio IDE': 'full',
                    'Office Desktop Apps': 'full',
                    'Office Web Apps': 'full',
                    'Microsoft Teams': 'full',
                    'Azure DevOps': 'full',
                    'GitHub Enterprise': 'full',
                    'Code AI (GitHub Copilot)': 'addon',
                    'Office AI (M365 Copilot)': 'addon',
                    'Azure Credits': 'full',
                    'Microsoft Software Access': 'full',
                    'Enterprise Security': 'full',
                    'Advanced Testing': 'full',
                    'Custom AI Agents': 'addon',
                    'Premium Support': 'full'
                }
            },
            {
                name: 'Microsoft 365 Business Basic',
                price: '$6/month',
                category: 'productivity',
                features: {
                    'Visual Studio IDE': 'none',
                    'Office Desktop Apps': 'none',
                    'Office Web Apps': 'full',
                    'Microsoft Teams': 'full',
                    'Azure DevOps': 'none',
                    'GitHub Enterprise': 'none',
                    'Code AI (GitHub Copilot)': 'none',
                    'Office AI (M365 Copilot)': 'addon',
                    'Azure Credits': 'none',
                    'Microsoft Software Access': 'none',
                    'Enterprise Security': 'partial',
                    'Advanced Testing': 'none',
                    'Custom AI Agents': 'addon',
                    'Premium Support': 'none'
                }
            },
            {
                name: 'Microsoft 365 Business Standard',
                price: '$12.50/month',
                category: 'productivity',
                features: {
                    'Visual Studio IDE': 'none',
                    'Office Desktop Apps': 'full',
                    'Office Web Apps': 'full',
                    'Microsoft Teams': 'full',
                    'Azure DevOps': 'none',
                    'GitHub Enterprise': 'none',
                    'Code AI (GitHub Copilot)': 'none',
                    'Office AI (M365 Copilot)': 'addon',
                    'Azure Credits': 'none',
                    'Microsoft Software Access': 'none',
                    'Enterprise Security': 'partial',
                    'Advanced Testing': 'none',
                    'Custom AI Agents': 'addon',
                    'Premium Support': 'none'
                }
            },
            {
                name: 'Microsoft 365 Business Premium',
                price: '$22/month',
                category: 'productivity',
                features: {
                    'Visual Studio IDE': 'none',
                    'Office Desktop Apps': 'full',
                    'Office Web Apps': 'full',
                    'Microsoft Teams': 'full',
                    'Azure DevOps': 'none',
                    'GitHub Enterprise': 'none',
                    'Code AI (GitHub Copilot)': 'none',
                    'Office AI (M365 Copilot)': 'addon',
                    'Azure Credits': 'none',
                    'Microsoft Software Access': 'none',
                    'Enterprise Security': 'full',
                    'Advanced Testing': 'none',
                    'Custom AI Agents': 'addon',
                    'Premium Support': 'partial'
                }
            },
            {
                name: 'Microsoft 365 E3',
                price: '$36/month',
                category: 'enterprise',
                features: {
                    'Visual Studio IDE': 'none',
                    'Office Desktop Apps': 'full',
                    'Office Web Apps': 'full',
                    'Microsoft Teams': 'full',
                    'Azure DevOps': 'none',
                    'GitHub Enterprise': 'none',
                    'Code AI (GitHub Copilot)': 'none',
                    'Office AI (M365 Copilot)': 'addon',
                    'Azure Credits': 'none',
                    'Microsoft Software Access': 'none',
                    'Enterprise Security': 'full',
                    'Advanced Testing': 'none',
                    'Custom AI Agents': 'addon',
                    'Premium Support': 'full'
                }
            },
            {
                name: 'Microsoft 365 E5',
                price: '$57/month',
                category: 'enterprise',
                features: {
                    'Visual Studio IDE': 'none',
                    'Office Desktop Apps': 'full',
                    'Office Web Apps': 'full',
                    'Microsoft Teams': 'full',
                    'Azure DevOps': 'none',
                    'GitHub Enterprise': 'none',
                    'Code AI (GitHub Copilot)': 'none',
                    'Office AI (M365 Copilot)': 'addon',
                    'Azure Credits': 'none',
                    'Microsoft Software Access': 'none',
                    'Enterprise Security': 'full',
                    'Advanced Testing': 'none',
                    'Custom AI Agents': 'addon',
                    'Premium Support': 'full'
                }
            },
            {
                name: 'GitHub Enterprise Cloud',
                price: '$21/month',
                category: 'development',
                features: {
                    'Visual Studio IDE': 'none',
                    'Office Desktop Apps': 'none',
                    'Office Web Apps': 'none',
                    'Microsoft Teams': 'none',
                    'Azure DevOps': 'full',
                    'GitHub Enterprise': 'full',
                    'Code AI (GitHub Copilot)': 'addon',
                    'Office AI (M365 Copilot)': 'none',
                    'Azure Credits': 'none',
                    'Microsoft Software Access': 'none',
                    'Enterprise Security': 'full',
                    'Advanced Testing': 'partial',
                    'Custom AI Agents': 'none',
                    'Premium Support': 'full'
                }
            },
            {
                name: 'GitHub Copilot Pro',
                price: '$10/month',
                category: 'ai',
                features: {
                    'Visual Studio IDE': 'none',
                    'Office Desktop Apps': 'none',
                    'Office Web Apps': 'none',
                    'Microsoft Teams': 'none',
                    'Azure DevOps': 'none',
                    'GitHub Enterprise': 'none',
                    'Code AI (GitHub Copilot)': 'full',
                    'Office AI (M365 Copilot)': 'none',
                    'Azure Credits': 'none',
                    'Microsoft Software Access': 'none',
                    'Enterprise Security': 'none',
                    'Advanced Testing': 'none',
                    'Custom AI Agents': 'none',
                    'Premium Support': 'none'
                }
            },
            {
                name: 'Microsoft 365 Copilot',
                price: '$30/month',
                category: 'ai',
                features: {
                    'Visual Studio IDE': 'none',
                    'Office Desktop Apps': 'none',
                    'Office Web Apps': 'none',
                    'Microsoft Teams': 'none',
                    'Azure DevOps': 'none',
                    'GitHub Enterprise': 'none',
                    'Code AI (GitHub Copilot)': 'none',
                    'Office AI (M365 Copilot)': 'full',
                    'Azure Credits': 'none',
                    'Microsoft Software Access': 'none',
                    'Enterprise Security': 'none',
                    'Advanced Testing': 'none',
                    'Custom AI Agents': 'partial',
                    'Premium Support': 'none'
                }
            },
            {
                name: 'Azure DevOps Basic',
                price: '$6/month',
                category: 'development',
                features: {
                    'Visual Studio IDE': 'none',
                    'Office Desktop Apps': 'none',
                    'Office Web Apps': 'none',
                    'Microsoft Teams': 'none',
                    'Azure DevOps': 'full',
                    'GitHub Enterprise': 'none',
                    'Code AI (GitHub Copilot)': 'none',
                    'Office AI (M365 Copilot)': 'none',
                    'Azure Credits': 'none',
                    'Microsoft Software Access': 'none',
                    'Enterprise Security': 'partial',
                    'Advanced Testing': 'none',
                    'Custom AI Agents': 'none',
                    'Premium Support': 'none'
                }
            }
        ];

        let selectedFeatures = [];

        function initializeApp() {
            createFeatureSelector();
            createMatrix();
            updateRecommendations();
        }

        function createFeatureSelector() {
            const featuresGrid = document.getElementById('featuresGrid');
            features.forEach((feature, index) => {
                const featureItem = document.createElement('div');
                featureItem.className = 'feature-item';
                featureItem.innerHTML = `
                    <div class="feature-content">
                        <div class="feature-icon">${feature.icon}</div>
                        <input type="checkbox" id="feature-${index}" class="feature-checkbox" onchange="toggleFeature('${feature.name}')">
                        <label for="feature-${index}" class="feature-label">${feature.name}</label>
                    </div>
                `;
                featuresGrid.appendChild(featureItem);

                featureItem.addEventListener('click', function(e) {
                    if (e.target.type !== 'checkbox') {
                        const checkbox = this.querySelector('input[type="checkbox"]');
                        checkbox.checked = !checkbox.checked;
                        toggleFeature(feature.name);
                    }
                });
            });
        }

        function createMatrix() {
            const headerRow = document.getElementById('headerRow');
            const matrixBody = document.getElementById('matrixBody');

            // Create feature headers (after the license header)
            features.forEach(feature => {
                const headerCell = document.createElement('div');
                headerCell.className = 'matrix-header-cell';
                headerCell.textContent = feature.name;
                headerRow.appendChild(headerCell);
            });

            // Create license rows
            licenses.forEach((license, index) => {
                const row = document.createElement('div');
                row.className = 'matrix-row';
                row.dataset.licenseIndex = index;

                // License name cell (first column - sticky)
                const licenseCell = document.createElement('div');
                licenseCell.className = 'matrix-license-cell';
                licenseCell.innerHTML = `
                    <div class="license-info">
                        <div class="license-name">${license.name}</div>
                        <div class="license-price">${license.price}</div>
                        <div class="license-category category-${license.category}">${license.category}</div>
                    </div>
                `;
                row.appendChild(licenseCell);

                // Feature support cells
                features.forEach(feature => {
                    const cell = document.createElement('div');
                    cell.className = 'matrix-cell';
                    
                    const supportLevel = license.features[feature.name];
                    const indicator = document.createElement('div');
                    indicator.className = 'support-indicator';
                    
                    switch(supportLevel) {
                        case 'full':
                            indicator.className += ' support-full';
                            indicator.textContent = '✓';
                            indicator.title = 'Fully included';
                            break;
                        case 'partial':
                            indicator.className += ' support-partial';
                            indicator.textContent = '~';
                            indicator.title = 'Partially included';
                            break;
                        case 'addon':
                            indicator.className += ' support-addon';
                            indicator.textContent = '+';
                            indicator.title = 'Available as add-on';
                            break;
                        case 'none':
                        default:
                            indicator.className += ' support-none';
                            indicator.textContent = '✗';
                            indicator.title = 'Not available';
                            break;
                    }
                    
                    cell.appendChild(indicator);
                    row.appendChild(cell);
                });

                matrixBody.appendChild(row);
            });
        }

        function toggleFeature(featureName) {
            const checkbox = document.querySelector(`#feature-${features.findIndex(f => f.name === featureName)}`);
            const featureItem = checkbox.closest('.feature-item');
            
            if (checkbox.checked) {
                if (!selectedFeatures.includes(featureName)) {
                    selectedFeatures.push(featureName);
                }
                featureItem.classList.add('selected');
            } else {
                selectedFeatures = selectedFeatures.filter(f => f !== featureName);
                featureItem.classList.remove('selected');
            }
            
            updateFeatureCounter();
            updateRecommendations();
            highlightRelevantLicenses();
        }

        function updateFeatureCounter() {
            const counter = document.getElementById('featureCounter');
            const counterText = document.getElementById('counterText');
            
            if (selectedFeatures.length > 0) {
                counter.style.display = 'block';
                counterText.textContent = `${selectedFeatures.length} feature${selectedFeatures.length === 1 ? '' : 's'} selected`;
            } else {
                counter.style.display = 'none';
            }
        }

        function highlightRelevantLicenses() {
            const licenseRows = document.querySelectorAll('.matrix-row');
            
            licenseRows.forEach((row, index) => {
                const licenseIndex = index;
                
                if (licenseIndex < licenses.length) {
                    const license = licenses[licenseIndex];
                    const relevance = calculateRelevance(license, selectedFeatures);
                    
                    if (selectedFeatures.length === 0) {
                        row.style.display = 'table-row';
                        row.classList.remove('highlighted');
                    } else if (relevance > 0.3) {
                        row.style.display = 'table-row';
                        row.classList.add('highlighted');
                    } else if (relevance > 0) {
                        row.style.display = 'table-row';
                        row.classList.remove('highlighted');
                    } else {
                        row.style.display = 'none';
                        row.classList.remove('highlighted');
                    }
                }
            });
        }

        function calculateRelevance(license, features) {
            if (features.length === 0) return 0;
            
            let relevanceScore = 0;
            features.forEach(featureName => {
                const support = license.features[featureName];
                if (support === 'full') {
                    relevanceScore += 1;
                } else if (support === 'partial') {
                    relevanceScore += 0.7;
                } else if (support === 'addon') {
                    relevanceScore += 0.3;
                }
            });
            
            return relevanceScore / features.length;
        }

        function updateRecommendations() {
            const container = document.getElementById('recommendationsContent');
            
            if (selectedFeatures.length === 0) {
                container.innerHTML = `
                    <div class="empty-state">
                        <div class="empty-state-icon">🎯</div>
                        <h3>Get Started</h3>
                        <p>Select the features you need to see personalized license recommendations.</p>
                    </div>
                `;
                return;
            }

            const recommendations = generateRecommendations(selectedFeatures);
            
            if (recommendations.length === 0) {
                container.innerHTML = `
                    <div class="empty-state">
                        <div class="empty-state-icon">🤔</div>
                        <h3>No Perfect Matches</h3>
                        <p>Consider adjusting your feature selection or using combination licenses.</p>
                    </div>
                `;
                return;
            }

            container.innerHTML = recommendations.map(rec => `
                <div class="recommendation-card">
                    <div class="recommendation-header">
                        <div class="recommendation-title">${rec.title}</div>
                        <div class="match-score">${Math.round(rec.score * 100)}% match</div>
                    </div>
                    <div class="recommendation-price">${rec.price}</div>
                    <div class="recommendation-details">${rec.details}</div>
                </div>
            `).join('');
        }

        function generateRecommendations(selectedFeatures) {
            const recommendations = [];
            
            // Single license recommendations
            licenses.forEach(license => {
                const coverage = calculateCoverage(license, selectedFeatures);
                if (coverage.score > 0.1) {
                    const missingFeatures = coverage.missing;
                    const addOnCost = calculateAddOnCost(missingFeatures);
                    
                    let details = `Provides ${Math.round(coverage.score * 100)}% of your required features directly.`;
                    
                    if (missingFeatures.length > 0) {
                        const criticalMissing = missingFeatures.filter(f => 
                            f.includes('AI') || f === 'Visual Studio IDE' || f === 'Office Desktop Apps'
                        );
                        
                        if (criticalMissing.length > 0) {
                            details += ` Missing: ${criticalMissing.slice(0, 2).join(', ')}.`;
                        }
                        
                        if (addOnCost > 0) {
                            details += ` Additional add-ons: +$${addOnCost}/month.`;
                        }
                    } else {
                        details += ' ✨ Complete solution with all features included!';
                    }
                    
                    const totalPrice = extractPrice(license.price) + addOnCost;
                    
                    recommendations.push({
                        title: license.name,
                        price: totalPrice > 0 ? `$${totalPrice}/month` : 'FREE',
                        details: details,
                        score: coverage.score,
                        totalCost: totalPrice
                    });
                }
            });

            // Smart combination recommendations
            if (selectedFeatures.includes('Visual Studio IDE') && selectedFeatures.includes('Code AI (GitHub Copilot)')) {
                recommendations.push({
                    title: '💻 Developer + AI Combo',
                    price: '$55/month',
                    details: 'Visual Studio Professional + GitHub Copilot Pro - Optimal for developers needing both professional IDE and AI coding assistance.',
                    score: 0.95,
                    totalCost: 55
                });
            }
            
            if (selectedFeatures.includes('Office Desktop Apps') && selectedFeatures.includes('Office AI (M365 Copilot)')) {
                recommendations.push({
                    title: '📊 Office Professional + AI',
                    price: '$42.50/month',
                    details: 'Microsoft 365 Business Standard + Microsoft 365 Copilot - Perfect for knowledge workers with full Office suite and AI.',
                    score: 0.9,
                    totalCost: 42.5
                });
            }

            // Sort by score first, then by cost
            recommendations.sort((a, b) => {
                if (Math.abs(a.score - b.score) < 0.05) {
                    return a.totalCost - b.totalCost;
                }
                return b.score - a.score;
            });

            return recommendations.slice(0, 5);
        }

        function calculateCoverage(license, selectedFeatures) {
            let covered = 0;
            let missing = [];
            
            selectedFeatures.forEach(featureName => {
                const support = license.features[featureName];
                if (support === 'full') {
                    covered += 1;
                } else if (support === 'partial') {
                    covered += 0.7;
                } else if (support === 'addon') {
                    covered += 0.3;
                } else {
                    missing.push(featureName);
                }
            });
            
            return {
                score: selectedFeatures.length > 0 ? covered / selectedFeatures.length : 0,
                missing: missing
            };
        }

        function calculateAddOnCost(missingFeatures) {
            let cost = 0;
            
            if (missingFeatures.includes('Code AI (GitHub Copilot)')) {
                cost += 10;
            }
            if (missingFeatures.includes('Office AI (M365 Copilot)')) {
                cost += 30;
            }
            if (missingFeatures.includes('GitHub Enterprise')) {
                cost += 21;
            }
            if (missingFeatures.includes('Azure DevOps')) {
                cost += 6;
            }
            
            return cost;
        }

        function extractPrice(priceString) {
            if (priceString === 'FREE') return 0;
            const match = priceString.match(/\$(\d+(?:\.\d+)?)/);
            return match ? parseFloat(match[1]) : 0;
        }

        function clearAllSelections() {
            selectedFeatures = [];
            
            document.querySelectorAll('input[type="checkbox"]').forEach(checkbox => {
                checkbox.checked = false;
            });
            
            document.querySelectorAll('.feature-item').forEach(item => {
                item.classList.remove('selected');
            });
            
            // Reset matrix display
            document.querySelectorAll('.matrix-row').forEach(row => {
                row.style.display = 'table-row';
                row.classList.remove('highlighted');
            });
            
            updateFeatureCounter();
            updateRecommendations();
        }

        // Initialize when the page loads
        document.addEventListener('DOMContentLoaded', initializeApp);
    </script>
</body>
</html>
